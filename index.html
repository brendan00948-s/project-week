<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macau Traffic Monitor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://img1.wsimg.com/isteam/getty/2154404610') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #ffd700, #ff8c00);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .logo i {
            font-size: 40px;
            color: #8b0000;
        }
        
        h1 {
            font-size: 2.8rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 20px;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .nav-tab {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .nav-tab.active {
            background: #ffd700;
            color: #000;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dashboard {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .map-container {
            flex: 3;
            min-width: 300px;
            height: 600px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
            border-radius: 15px;
            border: none;
        }
        
        .info-panel {
            flex: 1;
            min-width: 250px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: #ffd700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .traffic-status {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .status-item {
            text-align: center;
        }
        
        .status-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .status-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .congestion-high { color: #ff4d4d; }
        .congestion-medium { color: #ffcc00; }
        .congestion-low { color: #4dff4d; }
        
        .waiting-times {
            margin-top: 20px;
        }
        
        .waiting-time-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .waiting-time-item:hover {
            background: rgba(255, 255, 255, 0.1);
            padding-left: 10px;
        }
        
        .waiting-time-item:last-child {
            border-bottom: none;
        }
        
        .location-name {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .time-display {
            font-weight: bold;
        }
        
        .time-low { color: #4dff4d; }
        .time-medium { color: #ffcc00; }
        .time-high { color: #ff4d4d; }
        .time-severe { color: #9932cc; }
        .time-closed { color: #808080; }
        
        .legend {
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .legend-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: #ffd700;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            margin-right: 10px;
        }
        
        .legend-severe { background-color: #9932cc; }
        .legend-high { background-color: #ff4d4d; }
        .legend-medium { background-color: #ffcc00; }
        .legend-low { background-color: #4dff4d; }
        .legend-closed { background-color: #808080; }
        
        .app-promo {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .app-promo h2 {
            color: #ffd700;
            margin-bottom: 15px;
        }
        
        .app-features {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .feature {
            flex: 1;
            min-width: 150px;
            text-align: center;
        }
        
        .feature i {
            font-size: 2rem;
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .app-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .app-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            border-radius: 30px;
            background: #000;
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .app-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .app-btn.apple {
            background: #000;
        }
        
        .app-btn.google {
            background: #34A853;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            font-size: 0.9rem;
            opacity: 0.8;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .map-instructions {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            z-index: 1000;
            animation: fadeOut 5s forwards;
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }
        
        @media (max-width: 768px) {
            .dashboard {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .map-container {
                height: 400px;
            }
            
            .nav-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-tab {
                width: 80%;
                text-align: center;
            }
        }
        
        .data-source {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .data-source i {
            font-size: 0.7rem;
        }
        
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 10px;
            color: #ffd700;
        }
        
        .spinner {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 2px solid #ffd700;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 5px;
        }
        
        .status-live {
            background-color: #4dff4d;
            box-shadow: 0 0 5px #4dff4d;
        }
        
        .status-offline {
            background-color: #ff4d4d;
        }
        
        .current-time {
            text-align: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .median-time {
            text-align: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-top: 15px;
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .median-value {
            font-size: 1.3rem;
        }
        
        .additional-info {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .info-box {
            flex: 1;
            min-width: 250px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .info-box h3 {
            color: #ffd700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-content {
            line-height: 1.6;
        }
        
        .info-content ul {
            padding-left: 20px;
        }
        
        .info-content li {
            margin-bottom: 10px;
        }
        
        .camera-feeds {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .camera-feeds h2 {
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .camera-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .camera-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
        }
        
        .camera-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            text-align: center;
            color: #ffd700;
        }
        
        .camera-container {
            height: 200px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .camera-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        @media (max-width: 768px) {
            .camera-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .chat-box {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .chat-box h2 {
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .content-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .content-section h2 {
            color: #ffd700;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .content-section p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <div class="logo">
                    <i class="fas fa-car"></i>
                </div>
                <h1>Macau Traffic Monitor</h1>
            </div>
            <h2>Hello! Welcome to visit our website!</h2>
            <p class="subtitle">Real-time traffic conditions and waiting times for Macau's major roads and border crossings</p>
            
            <div class="nav-tabs">
                <div class="nav-tab active" data-page="dashboard">Dashboard</div>
                <div class="nav-tab" data-page="cameras">Live Cameras</div>
                <div class="nav-tab" data-page="chat">Community Chat</div>
                <div class="nav-tab" data-page="about">About</div>
            </div>
        </header>
        
        <!-- Dashboard Page -->
        <div class="page active" id="dashboard-page">
            <div class="dashboard">
                <div class="map-container">
                    <div class="map-instructions">
                        <i class="fas fa-hand-pointer"></i> Drag to navigate the map
                    </div>
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d14776.617781308587!2d113.54378632368162!3d22.196236125310048!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2smo!4v1768878564422!5m2!1sen!2smo" 
                        id="map"
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>

                <div class="info-panel">
                    <h2 class="panel-title"><i class="fas fa-info-circle"></i> Traffic Overview</h2>
                    
                    <div class="current-time">
                        Current Time: <span id="current-time-display">--:--:--</span>
                    </div>
                    
                    <div class="traffic-status">
                        <div class="status-item">
                            <div class="status-label">Overall Traffic</div>
                            <div class="status-value congestion-low">LIGHT</div>
                        </div>
                        <div class="status-item">
                            <div class="status-label">Average Delay</div>
                            <div class="status-value" id="average-delay">15 min</div>
                        </div>
                    </div>
                    
                    <div class="waiting-times">
                        <h3><i class="fas fa-clock"></i> Estimated Crossing Duration</h3>
                        
                        <div class="waiting-time-item" data-location="friendship">
                            <div class="location-name">
                                <i class="fas fa-bridge"></i>
                                <span>Friendship Bridge</span>
                            </div>
                            <div class="time-display time-medium" id="friendship-time">-- min</div>
                        </div>

                        <div class="waiting-time-item" data-location="sai-van">
                            <div class="location-name">
                                <i class="fas fa-bridge"></i>
                                <span>Sai Van Bridge</span>
                            </div>
                            <div class="time-display time-medium" id="sai-van-time">-- min</div>
                        </div>
                        
                        <div class="waiting-time-item" data-location="horta">
                            <div class="location-name">
                                <i class="fas fa-road"></i>
                                <span>Avenida de Horta e Costa</span>
                            </div>
                            <div class="time-display time-high" id="horta-time">-- min</div>
                        </div>
                        
                        <div class="waiting-time-item" data-location="san-ma">
                            <div class="location-name">
                                <i class="fas fa-road"></i>
                                <span>San Ma Lou</span>
                            </div>
                            <div class="time-display time-medium" id="san-ma-time">-- min</div>
                        </div>
                        
                        <div class="waiting-time-item" data-location="praca">
                            <div class="location-name">
                                <i class="fas fa-road"></i>
                                <span>Praca de Ferreira do Amaral</span>
                            </div>
                            <div class="time-display time-medium" id="praca-time">-- min</div>
                        </div>
                        
                        <div class="waiting-time-item" data-location="portas">
                            <div class="location-name">
                                <i class="fas fa-archway"></i>
                                <span>Portas do Cerco</span>
                            </div>
                            <div class="time-display time-high" id="portas-time">-- min</div>
                        </div>
                        
                        <div class="waiting-time-item" data-location="cotai">
                            <div class="location-name">
                                <i class="fas fa-road"></i>
                                <span>Cotai Strip</span>
                            </div>
                            <div class="time-display time-medium" id="cotai-time">-- min</div>
                        </div>
                    </div>
                    
                    <div class="median-time">
                        Median Traffic Time: <span class="median-value" id="median-time">-- min</span>
                    </div>
                    
                    <div class="legend">
                        <div class="legend-title">Traffic Legend</div>
                        <div class="legend-item">
                            <div class="legend-color legend-severe"></div>
                            <span>Severe Traffic (40+ min delay)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-high"></div>
                            <span>Heavy Traffic (20-40 min delay)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-medium"></div>
                            <span>Moderate Traffic (10-20 min delay)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-low"></div>
                            <span>Light Traffic (<10 min delay)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-closed"></div>
                            <span>Closed/Blocked</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="additional-info">
                <div class="info-box">
                    <h3><i class="fas fa-info-circle"></i> Website Traffic Information</h3>
                    <div class="info-content">
                        <p>This real-time traffic monitor provides estimated waiting times for major roads and border crossings in Macau.</p>
                        <ul>
                            <li>Times are updated every 30 seconds based on current traffic conditions</li>
                            <li>Colors indicate traffic severity levels</li>
                            <li>Data is simulated for demonstration purposes</li>
                            <li>Actual travel times may vary</li>
                        </ul>
                    </div>
                </div>
                
                <div class="info-box">
                    <h3><i class="fas fa-exclamation-triangle"></i> Travel Tips</h3>
                    <div class="info-content">
                        <ul>
                            <li>Avoid peak hours (7:00-9:30 and 17:00-19:00) when possible</li>
                            <li>Please note that Macau's maximum speed in normal roads is 50 km/h, whole bridges are 80 km/h.</li>
                            <li>Consider using public transportation during heavy traffic periods</li>
                            <li>Check border crossing times before traveling</li>
                            <li>Plan extra time for important appointments</li>
                            <li>Use alternative routes when main roads show heavy congestion</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Live Cameras Page -->
        <div class="page" id="cameras-page">
            <div class="camera-feeds">
                <h2><i class="fas fa-video"></i> Live Traffic Cameras</h2>
                <div class="camera-grid">
                    <div class="camera-item">
                        <div class="camera-title">提督馬路與高士德大馬路交界</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/m2065.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">新馬路與南灣馬路交界</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/m2181.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">松山隧道向高士德</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/t4001.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">亞馬喇前地</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/m2061.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">金光大道</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/t2016.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">金光大道和路氹連貫公路</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/t2015.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">友誼大橋向氹仔</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1033.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">友誼大橋向澳门</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1025.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">西灣大橋向澳门</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1245.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">西湾大桥向氹仔（高处）</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1311.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">西湾大桥向澳门（高处）</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1312.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">澳门大桥入口（澳门）</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1406.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">澳门大橋向氹仔</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1436.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">澳門大橋向澳門</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/b1439.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">關閘隧道</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/m2173.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">青茂口岸（A）</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/m2331.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                    
                    <div class="camera-item">
                        <div class="camera-title">青茂口岸（B）</div>
                        <div class="camera-container">
                            <iframe src="https://streaming1.dsatmacau.com/traffic/m2332.m3u8" allowfullscreen></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Community Chat Page -->
        <div class="page" id="chat-page">
            <div class="chat-box">
                <h2><i class="fas fa-comments"></i> Community Chat</h2>
                <div class="elfsight-container">
                    <iframe src="https://deadsimplechat.com/oJ199RRBK" width="100%" height="600px"></iframe>
                </div>
            </div>
            
            <div class="content-section">
                <h2>Community Guidelines</h2>
                <p>Welcome to the Macau Traffic Monitor community chat! This space is for sharing real-time traffic updates, road conditions, and travel tips with fellow Macau residents and visitors.</p>
                <p>Please follow these guidelines to keep our community helpful and respectful:</p>
                <ul>
                    <li>Share accurate, current traffic information</li>
                    <li>Be respectful and courteous to all users</li>
                    <li>Report road incidents, accidents, or construction</li>
                    <li>Ask questions about traffic patterns or road conditions</li>
                    <li>Avoid spam, advertisements, or off-topic discussions</li>
                    <li>Use appropriate language - no offensive content</li>
                </ul>
                <p>Our moderators monitor the chat to ensure a positive experience for everyone. Violation of these guidelines may result in temporary or permanent ban from the chat.</p>
            </div>
        </div>
        
        <!-- About Page -->
        <div class="page" id="about-page">
            <div class="content-section">
                <h2>About Macau Traffic Monitor</h2>
                <p>Macau Traffic Monitor is a real-time traffic information platform designed to help residents and visitors navigate Macau's road network efficiently. Our service provides up-to-date traffic conditions, estimated crossing times, and live camera feeds for major roads and border crossings.</p>
                
                <h3>Our Mission</h3>
                <p>We aim to reduce travel time and improve road safety in Macau by providing accurate, real-time traffic information. Our platform helps users make informed decisions about their travel routes and timing.</p>
                
                <h3>Data Sources</h3>
                <p>Our traffic data is sourced from multiple official channels:</p>
                <ul>
                    <li>DSAT (Direcção de Serviços de Trânsito) - Official traffic data</li>
                    <li>Google Maps API - Traffic flow and incident reports</li>
                    <li>Live traffic cameras operated by DSAT</li>
                    <li>Community reports from our users</li>
                </ul>
                
                <h3>Features</h3>
                <ul>
                    <li>Real-time traffic conditions visualization</li>
                    <li>Estimated waiting times for border crossings</li>
                    <li>Live traffic camera feeds</li>
                    <li>Community chat for real-time updates</li>
                    <li>Mobile app for on-the-go traffic updates</li>
                    <li>Historical traffic pattern analysis</li>
                </ul>
            </div>
            
            <div class="app-promo">
                <h2><i class="fas fa-mobile-alt"></i> Get Traffic Updates on the Go</h2>
                <p>Download our mobile app for traffic alerts and navigation assistance</p>
                
                <div class="app-features">
                    <div class="feature">
                        <i class="fas fa-bell"></i>
                        <p>Instant Alerts</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-route"></i>
                        <p>Smart Routing</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-history"></i>
                        <p>Traffic History</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-map-marked-alt"></i>
                        <p>Offline Maps</p>
                    </div>
                </div>
                
                <div class="app-buttons">
                    <a href="#" class="app-btn apple">
                        <i class="fab fa-apple"></i>
                        <div>
                            <small>Download on the</small>
                            <p>App Store</p>
                        </div>
                    </a>
                    <a href="#" class="app-btn google">
                        <i class="fab fa-google-play"></i>
                        <div>
                            <small>Get it on</small>
                            <p>Google Play</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Macau Traffic Monitor © 2026 | Traffic data for Macau Special Administrative Region</p>
            <p>Data Sources: Google Maps API | DSAT (Direcção de Serviços de Trânsito)</p>
        </footer>
    </div>
    
    <script>
        // Tab navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and pages
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
                
                // Add active class to clicked tab
                tab.classList.add('active');
                
                // Show corresponding page
                const pageId = tab.getAttribute('data-page') + '-page';
                document.getElementById(pageId).classList.add('active');
            });
        });
        
      // Updated traffic data with new time ranges
        const trafficData = {
            "friendship":     [
                { start:     7,     end:     9.5,     min:     4,     max:     8 },         // 7:    00 to 9:    30 = 4-8 mins
                { start:     9,     end:     15,     min:     43,     max:     45 },         // 9:    00 - 15:    00 = 5-10 mins
                { start:     15.01,     end:     20,     min:     8,     max:     10 },     // 15:    01 - 20:    00 - 8-10 mins
                { start:     19,     end:     6.99,     min:     4,     max:     5 }    // 19:    00 to 6:    59 - 4-5 mins
            ],     
            "sai-van":     [
                { start:     7,     end:     9.5,     min:     3,     max:     5 },         // 7:    00 to 9:    30 = 3-5 mins
                { start:     9.51,     end:     15,     min:     3,     max:     5 },      // 9:    31 - 15:    00 = 5-10 mins
                { start:     15.01,     end:     18.99,     min:     3,     max:5 },     // 15:    01 - 18:    59 - 6-15 mins
                { start:     19,     end:     6.99,     min:     4,     max:     10 }   // 19:    00 to 6:    59 - 4-10 mins
            ],     
            "horta":     [
                { start:     7,     end:     9.99,     min:     8,     max:     18 },       // 7:    00 to 9:    59 = 8-18 mins
                { start:     10,     end:     15,     min:     5,     max:     10 },        // 10:    00 - 15:    00= 5-10 mins
                { start:     15.5,     end:     18.99,     min:     15,     max:     30 },     // 15:    30-18:    59 - 15-30 mins
                { start:     19,     end:     6.99,     min:     4,     max:     8 }    // 19:    00 to 6:    59 - 4-8 mins
            ],     
            "san-ma":     [
                { start:     7,     end:     8.99,     min:     6,     max:     10 },       // 7:    00 to 8:    59 = 6-10 mins
                { start:     9,     end:     15,     min:     1,     max:     10 },         // 9:    00- 15:    00 = 1-10 mins
                { start:     15.01,     end:     18.99,     min:     10,     max:     20 },     // 15:    01-18:    59 - 10-20 mins
                { start:     19,     end:     6.99,     min:     4,     max:     10 }   // 19:    00to 6:    59 - 4-10 mins
            ],     
            "praca":     [
                { start:     7,     end:     8.99,     min:     6,     max:     15 },       // 7:    00 to 8:    59 =6-15mins
                { start:     9,     end:     15,     min:     6,     max:     15 },         // 9:    00 - 15:    00 = 6-15 mins
                { start:     15.01,     end:     18.99,     min:     6,     max:     15 },     // 15:    01 - 18:    59 - 6-15mins
                { start:     19,     end:     6.99,     min:     6,     max:     15 }   // 19:    00 to 6:    59 - 6-15 mins
            ],     
            "portas":     [
                { start:     7,     end:     8.99,     min:     5,     max:     10 },       // 7:    00 to 8:    59 = 5 - 10 mins
                { start:     9,     end:     15,     min:     10,     max:     15 },        // 9:    00- 15:    00 = 10-15 mins
                { start:     15.01,     end:     20,     min:     10,     max:     25 },     // 15:    01 - 20:    00 = 10-25 min
                { start:     20.01,     end:     23,     min:     10,     max:     15 },     // 20:    01 - 23:    00 = 10-15 mins
                { start:     23.01,     end:     6.99,     min:     1,     max:     3 } // 23:    01-6:    59= 1-3 mins
            ],     
            "cotai":     [
                { start:     7,     end:     8.99,     min:     3,     max:     10 },       // 7:    00 to 8:    59 =3-10mins
                { start:     9,     end:     15,     min:     3,     max:     10 },         // 9:    00 - 15:    00 = 3-10 mins
                { start:     15.01,     end:     18.99,     min:     10,     max:     15 },     // 15:    01 - 18:    59 - 10-15mins
                { start:     19,     end:     6.99,     min:     6,     max:     10 }   // 19:    00 to 6:    59 - 6-10 mins
            ]
        };

        // Initialize current times for each location
        const currentTimes = {};
        let medianTime = 0;
        let lastUpdateTime = 0;

        // Function to get current time in decimal format (e.g.,     14.5 for 2:    30 PM)
        function getCurrentTimeDecimal() {
            const now = new Date();
            return now.getHours() + now.getMinutes() / 60 + now.getSeconds() / 3600;
        }

        // Function to format time as HH:    MM:    SS
        function formatTime(date) {
            const hours = String(date.getHours()).padStart(2,     '0');
            const minutes = String(date.getMinutes()).padStart(2,     '0');
            const seconds = String(date.getSeconds()).padStart(2,     '0');
            return `${hours}:    ${minutes}:    ${seconds}`;
        }

        // Function to get traffic time for a location based on current time
        function getTrafficTime(location) {
            const currentTime = getCurrentTimeDecimal();
            const data = trafficData[location];
            
            // Find the appropriate time range
            for (const range of data) {
                // Handle overnight ranges (e.g.,     19:    00 to 06:    59)
                if (range.start > range.end) {
                    if (currentTime >= range.start || currentTime <= range.end) {
                        // Special handling for Sai Van Bridge with chance
                        if (location === "sai-van" && range.chance) {
                            if (Math.random() < range.chance) {
                                return Math.floor(Math.random() * (30 - 11 + 1)) + 11;
                            }
                        }
                        // Calculate base time as midpoint of range
                        const baseTime = Math.floor((range.min + range.max) / 2);
                        // Add small fluctuation
                        const fluctuation = Math.floor(Math.random() * 3) - 1; // -1,     0,     or 1
                        return Math.max(range.min,     Math.min(range.max,     baseTime + fluctuation));
                    }
                } else {
                    if (currentTime >= range.start && currentTime <= range.end) {
                        // Special handling for Sai Van Bridge with chance
                        if (location === "sai-van" && range.chance) {
                            if (Math.random() < range.chance) {
                                return Math.floor(Math.random() * (30 - 11 + 1)) + 11;
                            }
                        }
                        // Calculate base time as midpoint of range
                        const baseTime = Math.floor((range.min + range.max) / 2);
                        // Add small fluctuation
                        const fluctuation = Math.floor(Math.random() * 3) - 1; // -1,     0,     or 1
                        return Math.max(range.min,     Math.min(range.max,     baseTime + fluctuation));
                    }
                }
            }
            
            // Default if no range matches
            return 10;
        }

        // Function to update all traffic times
        function updateTrafficTimes() {
            const now = new Date();
            document.getElementById('current-time-display').textContent = formatTime(now);
            
            // Only update traffic times every 30 seconds to prevent too frequent changes
            const currentTime = now.getTime();
            const shouldUpdateTraffic = currentTime - lastUpdateTime > 30000;
            
            if (shouldUpdateTraffic) {
                lastUpdateTime = currentTime;
                
                let totalTime = 0;
                let count = 0;
                const times = [];
                
                for (const location in trafficData) {
                    const timeElement = document.getElementById(`${location}-time`);
                    if (timeElement) {
                        let newTime;
                        
                        // If this is the first time,     initialize with calculated time
                        if (currentTimes[location] === undefined) {
                            newTime = getTrafficTime(location);
                            currentTimes[location] = newTime;
                        } else {
                            // For subsequent updates,     adjust by -1,     0,     or +1 minute
                            const adjustment = Math.floor(Math.random() * 3) - 1; // -1,     0,     or 1
                            newTime = Math.max(1,     currentTimes[location] + adjustment);
                            currentTimes[location] = newTime;
                        }
                        
                        timeElement.textContent = `${newTime} min`;
                        times.push(newTime);
                        
                        // Update color class based on time
                        timeElement.className = 'time-display';
                        if (newTime < 10) {
                            timeElement.classList.add('time-low');
                        } else if (newTime < 20) {
                            timeElement.classList.add('time-medium');
                        } else if (newTime < 40) {
                            timeElement.classList.add('time-high');
                        } else {
                            timeElement.classList.add('time-severe');
                        }
                        
                        totalTime += newTime;
                        count++;
                    }
                }
                
                // Calculate and display median time
                if (times.length > 0) {
                    times.sort((a,     b) => a - b);
                    const mid = Math.floor(times.length / 2);
                    medianTime = times.length % 2 !== 0 ? times[mid] :     (times[mid - 1] + times[mid]) / 2;
                    document.getElementById('median-time').textContent = `${Math.round(medianTime)} min`;
                }
                
                // Update average delay
                document.getElementById('average-delay').textContent = `${Math.round(medianTime)} min`;
            }
        }

        // Initialize the application
        function init() {
            // Update times immediately
            updateTrafficTimes();
            
            // Update times every second
            setInterval(updateTrafficTimes,     1000);
        }
        
        // Start the application when the page loads
        window.addEventListener('DOMContentLoaded',     init);
    </script>
    
    <script async src="https://iframely.net/embed.js"></script>
</body>
</html>
